<div id="percentage-container-{{ row_index }}">
    <div class="flex items-center gap-2">
        <input type="number"
               name="percentage_{{ row_index }}"
               id="percentage-{{ row_index }}"
               class="flex-1 h-9 px-3 bg-white border border-[#e9e9e9] rounded text-sm text-gray-900 text-right focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 hover:border-gray-700"
               value="{{ percentage|floatformat:2 }}"
               step="0.01"
               min="0"
               max="100"
               required
               hx-get="{% url 'opportunities:recalculate_split_row' opportunity.id split_type.id %}"
               hx-trigger="input changed delay:500ms"
               hx-target="#amount-container-{{ split_type.id }}-{{ row_index }}"
               hx-swap="innerHTML"
               hx-vals='{"row_index": "{{ row_index }}", "changed_field": "percentage"}'
               hx-include="#split-form-{{ split_type.id }} input[name^='percentage_'], #split-form-{{ split_type.id }} input[name^='amount_']"
               onblur="autoSaveSplits(this)">
        <span class="text-gray-600 font-semibold text-sm">%</span>
    </div>
</div>
<!-- OOB swap for totals -->
<div class="p-4 bg-gray-50 rounded-lg border border-[#e9e9e9]" id="totals-row-{{ split_type.id }}" hx-swap-oob="true">
    {% include "opportunity_split/totals_row.html" %}
</div>
